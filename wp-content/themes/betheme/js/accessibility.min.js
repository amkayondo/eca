!function(e){"use strict";var s={keysTriggered:{Tab:!1,Enter:!1,ShiftLeft:!1,ShiftRight:!1,ArrowLeft:!1,ArrowRight:!1,ArrowUp:!1,ArrowDown:!1},utils:{isSimpleHamburgerStack:!(e("body").hasClass("header-simple")&&!e("body").hasClass("mobile-side-slide")),switchExpanded:(s,i)=>e(s).attr("aria-expanded",i)},menuLinks:e("#menu .menu-item a").not(".menu-toggle").toArray(),subheaderLinks:e("#Subheader a").toArray(),wooPopup:e(".mfn-header-login").find("a, input").toArray(),contentLinks:[...e("#Content a").toArray(),...e("#Footer a").toArray()],clickListener(){jQuery(document).on("keydown",'a, *[role="link"], button',(e=>{let{originalEvent:s}=e,{code:i}=s;i in this.keysTriggered&&(this.keysTriggered[i]=!0),setTimeout((s=>this.recognizeGesture(e)),1)})),jQuery(document).on("keyup",'a, *[role="link"], button',(e=>{let{originalEvent:s}=e,{code:i}=s;i in this.keysTriggered&&(this.keysTriggered[i]=!1),setTimeout((s=>this.recognizeGesture(e)),1)})),jQuery("#skip-links-menu").one("focus","a",(function(){e("#skip-links-menu").css("top","0px")}))},skipLinks(){e(":focus").closest("nav").is("#skip-links-menu")?e("#skip-links-menu").css("top","0px"):e("#skip-links-menu").css("top","-200px")},recognizeGesture(s){let{Tab:i,ShiftLeft:t,ShiftRight:a,ArrowDown:r,ArrowUp:n,ArrowLeft:l,ArrowRight:o,Enter:d}=this.keysTriggered;const c=e(":focus");let u=e("*[aria-expanded=true]:not(#menu):not(.sub-menu)");const g=e("nav#menu").find("*[aria-expanded=true]"),h=e("body").hasClass("side-slide-is-open")?".extras-wrapper ":".top_bar_right ",f=()=>{let s=!1;return e("body").hasClass("rtl")&&(s=!0),e("body").hasClass("header-rtl")&&(s=!0),s};if(e(u).length&&!c.closest(u).length){const s=Object.values(u).filter((s=>s.classList&&"Side_slide"!==e(s).attr("id")));switch(u=s.length?e(s[0]):u,"Side_slide"!==u.attr("id")&&"true"==u.attr("aria-expanded")&&e(u).find(".mfn-close-icon").trigger("click"),this.utils.switchExpanded(u,!1),!0){case u.hasClass("mfn-header-login"):e(`${h} #myaccount_button`).trigger("focus");break;case u.hasClass("mfn-cart-holder"):e(`${h} #header_cart`).trigger("focus");break;case"Side_slide"===u.attr("id"):u.find(".close").trigger("click"),e(".responsive-menu-toggle").trigger("focus")}}if(e(g).length&&this.utils.isSimpleHamburgerStack&&(c.closest(g).length||g.siblings().is(c)||e(g).attr("aria-expanded","false").slideUp()),e(".sub-menu[aria-expanded=true]").each(((s,i)=>{"none"==e(i).css("display")&&this.utils.switchExpanded(i,!1)})),d)switch(!0){case"link"===c.attr("role"):c.find(".image_links").length?window.location=c.find("a").attr("href"):c.find(".title").length?c.find(".title").trigger("click"):c.closest(".mfn-woo-list").length&&c.trigger("click");break;case"wpml"===c.attr("data-title"):const s=c.siblings(".wpml-lang-dropdown");console.log(s),"false"==s.attr("aria-expanded")?(s.attr("aria-expanded","true"),s.find("a").first().trigger("focus")):s.attr("aria-expanded","false");break;case c.hasClass("menu-toggle")&&e("body").hasClass("side-slide-is-open"):const i=c.siblings(".sub-menu");i.trigger("click"),"block"==i.css("display")&&i.find("a").first().trigger("focus");break;case c.hasClass("menu-toggle")&&!e("body").hasClass("side-slide-is-open"):const t=c.siblings(".sub-menu");if(!this.utils.isSimpleHamburgerStack){if("true"==t.attr("aria-expanded"))this.utils.switchExpanded(t,!1);else{this.utils.switchExpanded(t,!0);let e=t.find("a").first();setTimeout((s=>e.trigger("focus")),100)}break}if("none"!=t.css("display")){this.utils.switchExpanded(t,!1),t.slideUp(0);const e=t.find("*[aria-expanded=true]");e.length&&(this.utils.switchExpanded(e,!1),e.slideUp())}else{this.utils.switchExpanded(t,!0);let e=t.slideDown(0).find("a").first();setTimeout((s=>e.trigger("focus")),100)}break;case c.hasClass("single_add_to_cart_button"):e(".mfn-cart-holder").find("a").first().trigger("focus");break;case c.hasClass("responsive-menu-toggle"):e("body").hasClass("mobile-side-slide")&&(this.menuLinks=[...e("#Side_slide").find("a.close").toArray(),...e(".extras-wrapper").find("a").toArray(),...this.menuLinks,...e("#Side_slide .social").find("a").toArray()],e(this.menuLinks[0]).trigger("focus"),c.trigger("click"),this.utils.switchExpanded(e("#Side_slide"),!0));break;case c.hasClass("overlay-menu-toggle"):"false"==e("#overlay-menu ul").attr("aria-expanded")||void 0===e("#overlay-menu ul").attr("aria-expanded")?(this.utils.switchExpanded(e("#overlay-menu ul"),!0),e("#overlay-menu").find(".menu-item a").first().trigger("focus")):(this.utils.switchExpanded(e("#overlay-menu ul"),!1),c.hasClass("close")&&e(".overlay-menu-toggle").trigger("focus"))}else if(i&&(t||a))e("a.ui-tabs-anchor").attr("tabindex",0),this.skipLinks();else if(i)switch(e("a.ui-tabs-anchor").attr("tabindex",0),this.skipLinks(),!0){case c.closest("li").hasClass("wc-block-product-categories-list-item"):c.closest(".li-expanded").length||(c.siblings(".cat-expander").trigger("click"),c.siblings("ul").find("a").first().trigger("focus")),c.closest("li").siblings(".li-expanded").each(((s,i)=>e(i).find(".cat-expander").trigger("click")));break;case c.is(".overlay-menu-toggle",".focus")&&"block"===e("#Overlay").css("display"):e(".overlay-menu-toggle").trigger("focus");break;case c.is(e(this.contentLinks[this.contentLinks.length-1]))&&!e("body").hasClass("footer-menu-sticky"):e(".fixed-nav").length?e(".fixed-nav").first().trigger("focus"):e("body a").first().trigger("focus")}else if(f()?l:o){if(c.closest("li").find(".menu-toggle").length){const e=c.siblings(".sub-menu");if("none"==e.css("display")){this.utils.switchExpanded(e,!0);let s=e.slideDown(0).find("a").first();setTimeout((e=>s.trigger("focus")),100)}}}else if((f()?o:l)&&c.closest("ul[aria-expanded=true]").length){const e=c.closest(".sub-menu").find("*[aria-expanded=true]");e.length&&(this.utils.switchExpanded(e,!1),e.slideUp())}},init(){e("body").hasClass("keyboard-support")&&(this.clickListener(),e(".sub-menu").attr("aria-expanded","false"),e(".menu-toggle, .menu-item a").attr("tabindex","0"),e("#Content").attr("role","main"),e("#Header_wrapper").attr("role","banner").attr("aria-label","Header container"),e("body").is(".header-creative, .header-simple, .header-overlay")||e("#menu").removeAttr("aria-expanded"))}},i={onLinkAlert(){e("a").click((function(s){const i=e(s.currentTarget);"_blank"!==i.attr("target")&&"0"!==i.attr("target")||(confirm("The link will open in a new tab. Do you want to continue? ")||s.preventDefault())}))},init(){e("body").hasClass("warning-links")&&this.onLinkAlert()}};e(window).on("load",(function(){s.init(),i.init()}))}(jQuery);
